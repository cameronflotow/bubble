<html>
<head>
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
</head>
<body>
    <a-scene embedded vr-mode-ui="enabled: true">
        <a-sky id="image" src="${decodeURIComponent(getQueryVariable("imageUrl"))}" rotation="0 -180 0" animation="property: rotation; dur: 200000; easing: linear; loop: true; to: 0 -540 0"></a-sky>
        <a-entity camera look-controls="enabled: true" device-orientation-cam></a-entity>
        <a-entity magic-window></a-entity>
        <a-text position="-3 2 -5" value="${decodeURIComponent(getQueryVariable("title"))}" color="#FFFFFF" font="https://cdn.aframe.io/fonts/Exo2Bold.fnt"></a-text>

        <script>
            if (typeof window !== 'undefined') {
                function getQueryVariable(variable) {
                    const query = decodeURIComponent(window.location.search.substring(1));
                    const vars = query.split("&");
                    for (let i = 0; i < vars.length; i++) {
                        const pair = vars[i].split("=");
                        if (pair[0] === variable) {
                            return pair[1];
                        }
                    }
                    return "";
                }
            }
        </script>
    </a-scene>
</body>
</html>
